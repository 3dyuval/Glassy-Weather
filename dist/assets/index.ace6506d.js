var O=Object.defineProperty,W=Object.defineProperties;var F=Object.getOwnPropertyDescriptors;var x=Object.getOwnPropertySymbols;var B=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable;var S=(e,t,n)=>t in e?O(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,u=(e,t)=>{for(var n in t||(t={}))B.call(t,n)&&S(e,n,t[n]);if(x)for(var n of x(t))Y.call(t,n)&&S(e,n,t[n]);return e},v=(e,t)=>W(e,F(t));import{f as k,c as j,t as $,r as c,a as T,j as a,b as d,F as f,O as U,u as G,R as z,d as J,L as N,e as D,g as y,h as V,i as P,k as m,l as X,B as Z,T as q,m as K,n as w}from"./vendor.c8e5ec0d.js";const Q=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerpolicy&&(r.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?r.credentials="include":o.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(o){if(o.ep)return;o.ep=!0;const r=n(o);fetch(o.href,r)}};Q();const b=[{name:"Tel Aviv",id:0}],ee={darkMode:!1},te=[{title:"Temp",statName:"temp_c"},{title:"Feels like",statName:"feelslike_c"},{title:"Precipitation",statName:"precip_mm"},{title:"Humidity",statName:"humidity"},{title:"Windspeed",statName:"wind_kph"}],ae={settings:ee,stats:te};function A(e){let t=[];for(const n in e)typeof e[n]!="object"&&t.push({statName:n,statValue:e[n]});return t}function ne(e){return e.getHours()+Math.round(e.getMinutes()/60)}const ie=[{code:1e3,day:"Sunny",night:"Clear",icon:"1000"},{code:1003,day:"Partly cloudy",night:"Partly cloudy",icon:"1003"},{code:1006,day:"Cloudy",night:"Cloudy",icon:"1006, 1204, 1207"},{code:1009,day:"Overcast",night:"Overcast",icon:"1009, 1030, 1135, 1147"},{code:1030,day:"Mist",night:"Mist",icon:"1009, 1030, 1135, 1147"},{code:1063,day:"Patchy rain possible",night:"Patchy rain possible",icon:"1063, 1069, 1072, 1153, 1168"},{code:1066,day:"Patchy snow possible",night:"Patchy snow possible",icon:"1066, 1114, 1210, 1213, 1255"},{code:1069,day:"Patchy sleet possible",night:"Patchy sleet possible",icon:"1063, 1069, 1072, 1153, 1168"},{code:1072,day:"Patchy freezing drizzle possible",night:"Patchy freezing drizzle possible",icon:"1063, 1069, 1072, 1153, 1168"},{code:1087,day:"Thundery outbreaks possible",night:"Thundery outbreaks possible",icon:"1087"},{code:1114,day:"Blowing snow",night:"Blowing snow",icon:"1066, 1114, 1210, 1213, 1255"},{code:1117,day:"Blizzard",night:"Blizzard",icon:"1117"},{code:1135,day:"Fog",night:"Fog",icon:"1009, 1030, 1135, 1147"},{code:1147,day:"Freezing fog",night:"Freezing fog",icon:"1009, 1030, 1135, 1147"},{code:1150,day:"Patchy light drizzle",night:"Patchy light drizzle",icon:"1063, 1069, 1072, 1153, 1168"},{code:1153,day:"Light drizzle",night:"Light drizzle",icon:"1063, 1069, 1072, 1153, 1168"},{code:1168,day:"Freezing drizzle",night:"Freezing drizzle",icon:"1063, 1069, 1072, 1153, 1168"},{code:1171,day:"Heavy freezing drizzle",night:"Heavy freezing drizzle",icon:"1171, 1180, 1186, 1192"},{code:1180,day:"Patchy light rain",night:"Patchy light rain",icon:"1171, 1180, 1186, 1192"},{code:1183,day:"Light rain",night:"Light rain",icon:"1063, 1069, 1072, 1153, 1168"},{code:1186,day:"Moderate rain at times",night:"Moderate rain at times",icon:"1171, 1180, 1186, 1192"},{code:1189,day:"Moderate rain",night:"Moderate rain",icon:"1171, 1180, 1186, 1192"},{code:1192,day:"Heavy rain at times",night:"Heavy rain at times",icon:"1171, 1180, 1186, 1192"},{code:1195,day:"Heavy rain",night:"Heavy rain",icon:"1195, 1198, 1201, 1240"},{code:1198,day:"Light freezing rain",night:"Light freezing rain",icon:"1195, 1198, 1201, 1240"},{code:1201,day:"Moderate or heavy freezing rain",night:"Moderate or heavy freezing rain",icon:"1195, 1198, 1201, 1240"},{code:1204,day:"Light sleet",night:"Light sleet",icon:"1006, 1204, 1207"},{code:1207,day:"Moderate or heavy sleet",night:"Moderate or heavy sleet",icon:"1006, 1204, 1207"},{code:1210,day:"Patchy light snow",night:"Patchy light snow",icon:"1066, 1114, 1210, 1213, 1255"},{code:1213,day:"Light snow",night:"Light snow",icon:"1066, 1114, 1210, 1213, 1255"},{code:1216,day:"Patchy moderate snow",night:"Patchy moderate snow",icon:"1216, 1219, 1222, 1225, 1258"},{code:1219,day:"Moderate snow",night:"Moderate snow",icon:"1216, 1219, 1222, 1225, 1258"},{code:1222,day:"Patchy heavy snow",night:"Patchy heavy snow",icon:"1216, 1219, 1222, 1225, 1258"},{code:1225,day:"Heavy snow",night:"Heavy snow",icon:"1216, 1219, 1222, 1225, 1258"},{code:1237,day:"Ice pellets",night:"Ice pellets",icon:"1237, 1249, 1252, 1261, 1264"},{code:1240,day:"Light rain shower",night:"Light rain shower",icon:"1195, 1198, 1201, 1240"},{code:1243,day:"Moderate or heavy rain shower",night:"Moderate or heavy rain shower",icon:"1243, 1246"},{code:1246,day:"Torrential rain shower",night:"Torrential rain shower",icon:"1243, 1246"},{code:1249,day:"Light sleet showers",night:"Light sleet showers",icon:"1237, 1249, 1252, 1261, 1264"},{code:1252,day:"Moderate or heavy sleet showers",night:"Moderate or heavy sleet showers",icon:"1237, 1249, 1252, 1261, 1264"},{code:1255,day:"Light snow showers",night:"Light snow showers",icon:"1066, 1114, 1210, 1213, 1255"},{code:1258,day:"Moderate or heavy snow showers",night:"Moderate or heavy snow showers",icon:"1216, 1219, 1222, 1225, 1258"},{code:1261,day:"Light showers of ice pellets",night:"Light showers of ice pellets",icon:"1237, 1249, 1252, 1261, 1264"},{code:1264,day:"Moderate or heavy showers of ice pellets",night:"Moderate or heavy showers of ice pellets",icon:"1237, 1249, 1252, 1261, 1264"},{code:1273,day:"Patchy light rain with thunder",night:"Patchy light rain with thunder",icon:"1273, 1276"},{code:1276,day:"Moderate or heavy rain with thunder",night:"Moderate or heavy rain with thunder",icon:"1273, 1276"},{code:1279,day:"Patchy light snow with thunder",night:"Patchy light snow with thunder",icon:"1279, 1282"},{code:1282,day:"Moderate or heavy snow with thunder",night:"Moderate or heavy snow with thunder",icon:"1279, 1282"}];function I(e){const t=ie.find(n=>n.code==e);return t?`/src/Assets/WeatherConditions/${t.icon}.svg`:""}function oe(e){const t=i=>k(new Date(i),"EEEE"),n=i=>k(new Date(i),"dd/mm/yy");return e.forecast.forecastday.map(i=>({stats:A(i.day),date:n(i.date),name:t(i.date),temp:i.day.avgtemp_c,condition:i.day.condition.icon}))}const re=0,se=13;function ce(e){const t=[...e.forecast.forecastday[0].hour,...e.forecast.forecastday[1].hour],n=[];for(let i=0;i<t.length;i++)j(new Date(t[i].time),new Date)==1&&n.push(t[i]);return n.slice(re,se)}const de=12,le=Array.from({length:de},(e,t)=>({time:ne(new Date)+t,condition:{icon:null},temp_c:0}));function p(e){$.show(e,{timeout:1500})}const he="http://localhost:8000/city/";function _(e=null){const[t,n]=c.exports.useState(null),[i,o]=c.exports.useState(!1);function r(s,h=null){o(!0);try{T.get(he+s).then(l=>{p(h||`${l.data.location.name} weather fetched`),n({metadata:l.data.location,hours:ce(l.data),days:oe(l.data),stats:A(l.data.current),graphic:I(l.data.current.condition.code)})})}catch(l){console.error(l)}finally{o(!1)}}return c.exports.useEffect(()=>{!e||r(e)},[]),{weather:t,getWeather:r,isLoading:i}}function ue({children:e}){return a("div",{className:"header",children:e})}function me({dispatch:e,citiesActions:t}){const[n,i]=c.exports.useState("");function o(r){if(r.preventDefault(),!!n)try{T.get(`http://localhost:8000/city/${n}`).then(s=>{e({type:t.ADD_CITY,payload:s.data.location.name}),p(`${s.data.location.name} added`)})}catch(s){p(`${s}`),console.error(s)}finally{}}return d("form",{onSubmit:o,children:[a("label",{htmlFor:"city-name",children:"City name"}),a("input",{type:"text",id:"city-name",placeholder:"Enter City Name",value:n,onChange:r=>i(r.target.value)}),a("input",{type:"submit",value:"Add City"})]})}function ge(e){const{cities:t,dispatch:n,citiesActions:i}=e;return t===void 0||!t.length?null:d(f,{children:[d("div",{className:"flex flex-col justify-center backdrop-blur p-6 ",children:[a(U,{}),a("h1",{className:"text-xl",children:"Manage Cities"}),a(me,{dispatch:n,cities:t,citiesActions:i}),a("ul",{className:"manage-cities",children:t.map(o=>a(ye,{id:o.id,name:o.name,dispatch:n,citiesActions:i},o.id))})]}),a("div",{className:"manage-bg"})]})}function ye(e){const{name:t,id:n,dispatch:i,citiesActions:o}=e;return d("li",{className:"my-4 flex justify-between",children:[a("span",{className:"city-name",children:t}),a("input",{type:"button",value:"DELETE",className:"delete-city",onClick:()=>i({type:o.DELETE_CITY,payload:n})})]})}function pe(e){return c.exports.createElement("svg",u({width:40,height:41,viewBox:"0 0 40 41",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),c.exports.createElement("path",{d:"M7.04589 21.2704L31.9143 21.2704",stroke:"black",strokeWidth:2.48684,strokeLinecap:"round",strokeLinejoin:"round"}),c.exports.createElement("path",{d:"M17.0766 31.2584C17.0766 31.2584 7.04633 25.852 7.04633 21.2729C7.04633 16.6905 17.0766 11.2825 17.0766 11.2825",stroke:"black",strokeWidth:2.48684,strokeLinecap:"round",strokeLinejoin:"round"}))}function fe(e){return c.exports.createElement("svg",u({width:40,height:40,viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),c.exports.createElement("path",{d:"M34 29.5H8",stroke:"black",strokeWidth:2.48684,strokeLinecap:"round",strokeLinejoin:"round"}),c.exports.createElement("path",{d:"M8 12.5H34",stroke:"black",strokeWidth:2.48684,strokeLinecap:"round",strokeLinejoin:"round"}))}function ve(e){return c.exports.createElement("svg",u({width:40,height:40,viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),c.exports.createElement("path",{d:"M18.6855 29.8584H7.95471",stroke:"black",strokeWidth:2.48684,strokeLinecap:"round",strokeLinejoin:"round"}),c.exports.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M25.4187 29.8599C25.4187 33.2449 26.5476 34.3723 29.9311 34.3723C33.3147 34.3723 34.4436 33.2449 34.4436 29.8599C34.4436 26.4748 33.3147 25.3474 29.9311 25.3474C26.5476 25.3474 25.4187 26.4748 25.4187 29.8599Z",stroke:"black",strokeWidth:2.48684,strokeLinecap:"round",strokeLinejoin:"round"}),c.exports.createElement("path",{d:"M23.7136 12.4692H34.4429",stroke:"black",strokeWidth:2.48684,strokeLinecap:"round",strokeLinejoin:"round"}),c.exports.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.9805 12.467C16.9805 9.08344 15.8516 7.95459 12.468 7.95459C9.08295 7.95459 7.9541 9.08344 7.9541 12.467C7.9541 15.8521 9.08295 16.9795 12.468 16.9795C15.8516 16.9795 16.9805 15.8521 16.9805 12.467Z",stroke:"black",strokeWidth:2.48684,strokeLinecap:"round",strokeLinejoin:"round"}))}function Ne({children:e}){const[t,n]=c.exports.useState(!0),i=G();c.exports.useEffect(()=>{n(!0)},[]);function o(){n(!1),i(-1)}const r=d("div",{children:[a("div",{className:"modal-wrapper",onClick:o}),a("div",{className:"modal-body",children:a("div",{className:"modal-content",children:e})})]});return t?z.createPortal(r,document.body):null}function we(e){return d("li",{children:[d("div",{className:"left",children:[a("div",{className:"name",children:e.statName}),a("div",{className:"id",children:e.statName})]}),a("div",{className:"right",children:a("input",{value:e.statName,type:"checkbox",checked:e.checked,onChange:t=>e.onToggle(t)})})]})}function ke(e){const{getWeather:t,weather:n}=_(),{config:i,dispatch:o}=e;c.exports.useEffect(()=>{t("Rome")},[]);function r(s){o({type:"toggle",payload:{statName:s.target.value,checked:s.target.checked}})}return n?a("ul",{className:"config",children:n.stats.map(s=>a(we,{statName:s.statName,checked:i.stats.some(h=>h.statName===s.statName),onToggle:r},s.statName))}):"Loading configuration..."}function Le(e){const t=J();return a(f,{children:d("ul",{className:"navbar",children:[t.pathname!=="/"&&a("li",{className:"button",children:a(N,{to:"/",children:a(pe,{})})}),t.pathname==="/"&&a("li",{className:"button",children:a(N,{to:"./manage",children:a(fe,{})})}),t.pathname==="/manage"&&a(N,{to:"/manage/configuration",children:a("li",{className:"button",children:a(ve,{})})})]})})}function Ce({animate:e,graphic:t}){const[n,i]=c.exports.useState(!1),o=D(n,{from:{transform:"translateY(500px)",opacity:0},enter:{transform:"translateY(0px)",opacity:1},leave:{transform:"translateY(500px)",opacity:0},reset:!0,onRest:()=>i(!0),delay:500});return c.exports.useEffect(()=>{i(!0)},[t]),a(f,{children:o((r,s)=>a(y.div,{style:r,children:a("img",{className:"background-graphic",src:t})}))})}function Ee({children:e,width:t}){return a("div",{className:"carousel-item",style:{width:t},children:e})}function Me({children:e,cities:t,setSelectedCity:n}){const[i,o]=c.exports.useState(0),r=V({onSwipedLeft:()=>s(i+1),onSwipedRight:()=>s(i-1)});c.exports.useEffect(()=>{n(t[i].name)},[i]);function s(l){l<0?l=m.Children.count(e)-1:l>=m.Children.count(e)&&(l=0),o(l)}const h=P({translateX:`-${i*100}%`});return d(f,{children:[a("div",v(u({},r),{className:"carousel",children:a(y.div,{className:"inner",style:h,children:m.Children.map(e,(l,g)=>m.cloneElement(l,{width:"100%"}))})})),d("div",{className:"indicators",children:[a("button",{onClick:()=>{s(i-1)},children:"Prev"}),m.Children.map(e,(l,g)=>a("button",{className:`${g===i?"active":""}`,onClick:()=>{s(g)},children:g+1})),a("button",{onClick:()=>{s(i+1)},children:"Next"})]})]})}function xe({stats:e,layoutName:t}){return a("div",{className:t,alt:t,children:e&&e.map(n=>d("div",{className:"stat",id:n.statName,alt:n.statName,title:n.statName,children:[a("div",{className:"nameContainer",children:a("span",{className:"name",children:n?n.statName:"stat"})}),d("div",{className:"valueContainer",children:[a("span",{className:"value",children:n.statValue}),a("span",{className:"unit"})]})]},`stat-${n.statName}`))})}var H=c.exports.memo(xe);function Se({hour:e,animate:t,index:n}){const{time:i,condition:o,temp_c:r}=e,s=P({from:{value:0},to:{value:t?0:r},config:{damping:2,tension:50}}),h=n===0?"NOW":k(new Date(i),"HH:mm");return d("div",{className:"hour",children:[a("div",{className:"time",children:h}),d("div",{className:"rounded-box",children:[a("img",{className:"icon",src:I(o.code),style:{opacity:t?0:1}}),a(y.div,{className:"temp-txt",style:{opacity:t?0:1},children:s.value.to(l=>l.toFixed(1))})]})]})}function be({children:e,isLoading:t}){const[n,i]=D(m.Children.toArray(e),()=>({from:{opacity:.25},enter:{opacity:1},leave:{opacity:0},trail:25,reset:!0,onRest:()=>{i.start({opacity:1})}}));return a("div",{className:"hours",children:n((o,r)=>a(y.div,{style:o,children:r}))})}function Te({children:e,isLoading:t}){const n=m.Children.toArray(e),[i,o]=X(n.length,()=>({from:{opacity:.75},to:{opacity:.25},loop:!0,delay:100,easing:"easings.easeInOutQuart"}));return a(y.div,{className:"hours",children:i.map((r,s)=>a(y.div,{style:r,children:n[s]},s))})}function ze(e){const{animate:t,hours:n}=e;function i(o){return o.map((r,s)=>a(Se,{animate:t,index:s,hour:r},`hour${s}`))}return t||!n?a(Te,{animate:t,children:i(le)}):a(be,{animate:t,children:i(n)})}function De({days:e}){const[t,n]=c.exports.useState("");return a("div",{className:"days",children:e&&e.map(i=>a(Pe,{day:i,selectedDay:t,setSelectedDay:n},i.date))})}function Pe({setSelectedDay:e,selectedDay:t,day:n}){const{date:i,name:o,stats:r,temp:s,condition:h}=n;return d("div",{onClick:l=>e(t!==n?n:""),className:t===n?"selectedDay day":"day",children:[d("div",{className:"top",children:[d("div",{className:"left",children:[a("div",{children:o}),a("div",{children:i})]}),d("div",{className:"right",children:[a("div",{className:"temp",children:s}),a("div",{children:a("img",{src:h})})]})]}),a("div",{className:"stats-modal",children:a(H,{layoutName:"daily-stats",stats:r})})]})}function Ae({weather:e,isLoading:t}){var n,i;return d("div",{className:"city",children:[d("div",{className:"left-view",children:[d("div",{className:"title metadata",children:[a("h1",{children:(n=e==null?void 0:e.metadata.name)!=null?n:"Current City"}),a("h2",{children:(i=e==null?void 0:e.metadata.localtime)!=null?i:"Time in Current City"}),a(ze,{animate:t,hours:e&&e.hours})]}),e&&a(H,{stats:e.stats,layoutName:"main-stats"})]}),e&&a(De,{days:e.days})]})}function Ie(e){const{weather:t,isLoading:n,cities:i,setSelectedCity:o}=e;return i?d(f,{children:[a(Me,{cities:i,setSelectedCity:o,children:i.map(r=>a(Ee,{children:a(Ae,{isLoading:n,weather:t},r.id)},r.id))}),t&&a(Ce,{graphic:t.graphic,animate:n})]}):null}const L={ADD_CITY:"ADD_CITY",DELETE_CITY:"DELETE_CITY"};function _e(e,t){switch(t.type){case L.ADD_CITY:return[...e,{id:e.length,name:t.payload}];case L.DELETE_CITY:return e.filter(i=>i.id!==t.payload)}}function He(e,t){switch(t.type){case"add-stat":{const n={stats:[...e.stats,{statName:t.payload}]};return u(u({},e.settings),n)}case"remove-stat":return{stats:e.stats.filter(n=>n.statName!=t.payload)};case"toggle":if(console.log(t.payload),t.payload.checked){if(t.payload.checked)return p(t.payload.statName+" added"),v(u({},e),{stats:[...e.stats,{statName:t.payload.statName}]})}else return p(t.payload.statName+" removed"),v(u({},e),{stats:e.stats.filter(n=>n.statName!==t.payload.statName)});default:return e}}function Re(){var E,M;const{weather:e,getWeather:t,isLoading:n}=_(),[i,o]=c.exports.useReducer(_e,[],()=>JSON.parse(localStorage.getItem("cities"))||b),[r,s]=c.exports.useState(()=>i[0]||b[0]),[h,l]=c.exports.useReducer(He,[],()=>JSON.parse(localStorage.getItem("config"))||ae),[g,C]=c.exports.useState((M=(E=h==null?void 0:h.settings)==null?void 0:E.darkMode)!=null?M:!1);return c.exports.useLayoutEffect(()=>{document.title=`Weather in ${r}`,t(r)},[r]),c.exports.useEffect(()=>{!i||(localStorage.setItem("cities",JSON.stringify(i)),localStorage.setItem("config",JSON.stringify(h)))},[i,h]),a(Z,{children:d("div",{className:"app",children:[a(q,{}),a(ue,{children:a(Le,{darkMode:g,setDarkMode:C})}),d(K,{children:[a(w,{path:"*",element:a(Ie,{weather:e,cities:i,setSelectedCity:s})}),a(w,{path:"/manage/",element:a(ge,{citiesActions:L,cities:i,dispatch:o}),children:a(w,{path:"/manage/configuration",element:a(Ne,{children:a(ke,{config:h,dispatch:l,darkMode:g,setDarkMode:C})})})})]})]})})}z.render(a(m.StrictMode,{children:a(Re,{})}),document.getElementById("root"));
